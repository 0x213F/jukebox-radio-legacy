{% extends "base.html" %}

{% load static %}

{% block basestyles %}
<link href="https://fonts.googleapis.com/css?family=Major+Mono+Display|Work+Sans:300,400,700,900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../static/css/proj/base.css">
<link rel="stylesheet" href="../static/css/proj/list_streams.css">
<link rel="stylesheet" href="../static/css/proj/detail_stream.css">
<link rel="stylesheet" href="../static/css/proj/chat.css">
<link rel="stylesheet" href="../static/css/proj/modal.css">
<link rel="stylesheet" href="../static/css/proj/home.css">
<link rel="stylesheet" href="{% static '../static/css/spectre/spectre.min.css' %}">
<link rel="stylesheet" href="{% static '../static/css/spectre/spectre-icons.min.css' %}">

<script src="{% static '/js/jquery.js' %}"></script>
<script src="{% static '/js/proj/api.js' %}"></script>
<script src="{% static '/js/proj/home.js' %}"></script>
{% endblock %}

{% block main %}

<div id="csrf-token" class="hidden">
  {% csrf_token %}
</div>

<script>

var CSRF_TOKEN = $('#csrf-token').children().first().val();

</script>

<div class="main center-horizontal card">

  <div class="card-body">

    <!-- - - - - - - - - - - - - - - - - - - - - -->
    <!--  LOAD PAGE (LIST BROADCASTING SHOWINGS) -->
    <form class="ajax-form hidden"
          type="get"
          url="../api/music/list_broadcasting_streams/"
          submit="onload"
          onsuccess='display_broadcasting_streams'>

    </form>


    <!-- - - - - - - - - - - - - - --->
    <!--  LOAD PAGE (LIST SHOWINGS) -->
    <form class="ajax-form hidden"
          type="get"
          url="../api/music/list_streams/"
          submit="onload"
          onsuccess='display_tune_in_streams'>

    </form>

    <!-- - - - - - - - - - - - -->
    <!--  BROADCASTING STREAMS -->
    <div class="card-body">
      <form class="ajax-form" redirect="/createstream">
        <button class="btn btn-lg" style="width: 100%;">
          Create Stream
        </button>
      </form>
    </div>

    <div class="broadcasting-streams hidden"></div>

    <!-- - - - - - - - - --->
    <!--  TUNE IN STREAMS -->
    <div class="card-header">
      <div class="card-title h5">Tune In</div>
    </div>

    <div class="tune-in-streams hidden"></div>

    <!-- - - - --->
    <!-- FOOTER -->
    <div class='row align-center footer'>
      <form class="ajax-form" redirect="/account">
        <button style="margin-right: 1rem;">
          Account
        </button>
      </form>

      <form class="ajax-form" url="../api/user/logout/" type="post" redirect="/">
        <button style="margin-left: 1rem;">
          Logout
        </button>
      </form>
    </div>

  </div>

</div>

<div id="play-bar" class="play-bar hide-under-view">

  <div class="content link-spotify">
    <!-- localhost%3A8000 -->
    <!-- jukeboxrad.io -->
    <!-- jukebox.radio -->
    <a class="btn btn-primary" href="https://accounts.spotify.com/authorize?client_id=133a25c7195344dbafd4f50d7450330f&response_type=code&redirect_uri=http%3A%2F%2F127.0.0.1%3A8000%2Fconnect%3Fsource%3Dspotify&scope=streaming%20app-remote-control%20user-modify-playback-state%20user-read-currently-playing%20user-read-playback-state">Authorize Spotify <i class="icon icon-link"></i></a>
  </div>

  <div class="content currently-playing hide">

    <div class="album-art">
      <img />
    </div>

    <button id="play-bar-chat-button" class="btn btn-primary btn-lg">
      Chat <i class="icon icon-message"></i>
    </button>

  </div>

  <div class="content waiting-to-play hide">

    <div class="loading-container">
      <i class="form-icon loading" style="font-size: 48px; font-color: white;"></i>
    </div>

    <span class="title">
      Waiting for the stream to start playing music...
    </span>

  </div>

  <div class="content spotify-disconnected hide">

    <span class="title">
      No music is playing
    </span>

    <span class="sub-title">
      You must already be streaming on your device.
    </span>

    <a href="spotify:open">
      <button id="play-bar-chat-button" class="btn btn-lg">
        Fix <i class="gg-external" style="display: inline-block; margin-left: 5px; margin-right: 1px;"></i>
      </button>
    </a>

  </div>

</div>

{% endblock %}


{% block basescripts %}
<script src="{% static '/js/proj/main.js' %}"></script>
{% endblock %}
