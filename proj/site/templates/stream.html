{% extends "base.html" %}

{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/proj/play_bar.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/index.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/home.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/stream.css' %}">

<link rel="stylesheet" href="{% static 'css/proj/components/info.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/components/search.css' %}">
{% endblock %}

{% block main %}

<div id="stream-uuid" class="hidden">
  <input type="text" value="{{ stream.uuid }}">
</div>

<div id="stream-unique-custom-id" class="hidden">
  <input type="text" value="{{ stream.unique_custom_id }}">
</div>

<div id="is-stream-owner" class="hidden">
  <input type="text" value="{{ is_host }}">
</div>

<!-- - - - - - -->
<!--  MANAGE (HOST) -->
{% include "manage.html" %}

<!-- - - - - - -->
<!--  MANAGE (ELSE) -->
{% include "displayname.html" %}

<div id="main-card" class="main center-horizontal card" style="height: calc(100% - 24px);">

  <div class="card-body">

    <!-- - - - - --->
    <!--  BUTTONS -->
    <div style="width: 100%; height: 40px;">

      <form class="ajax-form" redirect="/" style="float: left;">
        <button class="btn btn-lg btn-link jr-btn-sq">
          <i class="gg-arrow-left-o" style="bottom: 1px;"></i>
        </button>
      </form>

      <button type="button" id="go-to-manage" class="btn btn-lg btn-link jr-btn-sq" style="float: left;">
        <i class="gg-profile" style="bottom: 1px;"></i>
      </button>

      <button class="btn btn-lg btn-link jr-btn-sq go-to-info" style="float: right; margin-right: 0px;">
        <i class="gg-info" style="left: 1px;"></i>
      </button>

      <button id="go-to-queue-top" class="btn btn-lg btn-link jr-btn-sq go-to-queue hidden" style="float: right;">
      </button>

    </div>

    <!-- - - - - -->
    <!-- YOUTUBE -->
    <div id="youtube-video-player" style="margin-top: 24px;"></div>
    <div id="youtube-video-player-2" style="margin-top: 24px;"></div>

    <!-- - - --->
    <!-- SYNC -->
    <button id="sync-playback"
            class="btn btn-primary btn-lg jr-btn-primary hidden"
            style="margin-left: 16px; float: right; width: 96px;">
      <i class="fas fa-sync-alt"></i>
    </button>

    <!-- - - --->
    <!-- CHAT -->
    <div class="chat-container" style="overflow-y: scroll; margin-top: 16px; margin-bottom: 16px;"></div>

    <!-- - - - - - - - --->
    <!-- CHAT INPUT BAR -->
    <div style="width: calc(100% - 48px); position: absolute; bottom: 24px;">
      <form class="ajax-form card-body" type="websocket">

        <input class="hidden" name="stream_uuid" value="{{ stream.uuid }}" />
        <input class="hidden" name="track_id" value="" />

        <div class="input-group">
          <input type="text"
                 id="chat-input-main"
                 class="form-input input-lg jr-input-left-half"
                 placeholder=""
                 name="text"
                 autocomplete="off">
          <button id="chat-submit"
                  class="btn btn-secondary btn-lg jr-btn-sq-right-half">
            <i class="icon icon-2x icon-message"></i>
          </button>
        </div>

      </form>
    </div>

  </div>

</div>

<!-- - - - - - - - -->
<!--  QUEUE SCREEN -->
{% include "components/queue.html" %}

<!-- - - - - - - - --->
<!--  SEARCH SCREEN -->
{% include "components/search.html" %}

<!-- - - - - - - --->
<!--  INFO SCREEN -->
{% include "components/info.html" %}

{% endblock %}

{% block scripts %}
<script src="https://sdk.scdn.co/spotify-player.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<script src="{% static 'js/proj/play_bar.js' %}"></script>
<script src="{% static 'js/proj/stream.js' %}"></script>

<script src="{% static 'js/proj/components/chat.js' %}"></script>
<script src="{% static 'js/proj/components/hosts.js' %}"></script>
<script src="{% static 'js/proj/components/queue.js' %}"></script>
<script src="{% static 'js/proj/components/search.js' %}"></script>
<script src="{% static 'js/proj/components/share.js' %}"></script>
<script src="{% static 'js/proj/components/info.js' %}"></script>

<script src="{% static 'js/proj/components/playback/spotify.js' %}"></script>
<script src="{% static 'js/proj/components/playback/youtube.js' %}"></script>
<script src="{% static 'js/proj/components/playback/storage.js' %}"></script>
{% endblock %}
