{% extends "base.html" %}

{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/proj/index.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/home.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/stream.css' %}">

<link rel="stylesheet" href="{% static 'css/proj/components/info.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/components/search.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/components/manage.css' %}">
<link rel="stylesheet" href="{% static 'css/proj/components/queue.css' %}">
{% endblock %}

{% block main %}

<div id="main-view" class="main center-horizontal card" style="height: calc(100% - 24px);">

  <div class="card-body">

    <!-- - - - - --->
    <!--  BUTTONS -->
    <div style="width: 100%; height: 40px;">

      <form class="ajax-form" redirect="/" style="float: left;">
        <button class="btn btn-lg btn-link jr-btn-sq">
          <i class="gg-arrow-left-o" style="bottom: 1px;"></i>
        </button>
      </form>

      <button type="button"
              class="go-to-manage-view btn btn-lg btn-link jr-btn-sq"
              style="float: left;">
        <i class="gg-profile" style="bottom: 1px;"></i>
      </button>

      <button class="btn btn-lg btn-link jr-btn-sq go-to-info-view " style="float: right; margin-right: 0px;">
        <i class="gg-info" style="left: 1px;"></i>
      </button>

      <button id="go-to-queue-view" class="go-to-queue-view btn btn-lg btn-link jr-btn-sq {% if not ticket.is_administrator %}hidden{% endif %}" style="float: right;">
        <i class="gg-play-list-search" style="left: 5px;"></i>
      </button>

    </div>

    <!-- - - - - -->
    <!-- YOUTUBE -->
    <div id="youtube-video-player" style="margin-top: 24px;"></div>
    <div id="youtube-video-player-2" style="margin-top: 24px;"></div>

    <!-- - - --->
    <!-- SYNC -->
    <button id="sync-playback"
            class="btn btn-primary btn-lg jr-btn-primary hidden"
            style="margin-left: 24px; margin-top: 24px;float: right; width: 96px;">
      <i class="fas fa-sync-alt"></i>
    </button>

    <!-- - - --->
    <!-- CHAT -->
    <div class="chat-container" style="overflow-y: scroll; margin-top: 16px; margin-bottom: 16px;"></div>

    <!-- - - - -->
    <button id="broadcast-audio"
            class="btn btn-link"
            style="width:48px; height: 24px; bottom: 76px; right: 24px; position: absolute; border-radius: 12px;">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top: -3px;" > <path fill-rule="evenodd" clip-rule="evenodd" d="M9 4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4V12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12V4ZM13 4V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4Z" fill="currentColor" /> <path d="M18 12C18 14.973 15.8377 17.441 13 17.917V21H17V23H7V21H11V17.917C8.16229 17.441 6 14.973 6 12V9H8V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V9H18V12Z" fill="currentColor" /> </svg>
    </button>

    <!-- - - - - - - - --->
    <!-- CHAT INPUT BAR -->
    <div style="width: calc(100% - 48px); position: absolute; bottom: 24px;">
      <form class="ajax-form card-body" type="websocket">

        <input class="hidden" name="stream_uuid" value="{{ stream.uuid }}" />
        <input class="hidden" name="track_id" value="" />

        <div class="input-group">
          <textarea rows="1"
                 type="text"
                 id="chat-input-main"
                 class="form-input jr-input-left-half no-scrollbar"
                 placeholder=""
                 name="text"
                 autocomplete="off"
                 oninput="auto_grow(this)"></textarea>
          <button id="chat-submit"
                  class="btn btn-link jr-btn-sq-right-half">
            <i class="icon icon-2x icon-message" style="font-size: 16px; bottom: 6px;"></i>
          </button>
        </div>

      </form>
    </div>

  </div>

</div>

<!-- - - - - - - --->
<!--  MANAGE VIEW -->
{% include "components/manage.html" %}

<!-- - - - - - - -->
<!--  QUEUE VIEW -->
{% include "components/queue.html" %}

<!-- - - - - - - --->
<!--  SEARCH VIEW -->
{% include "components/search.html" %}

<!-- - - - - - --->
<!--  INFO VIEW -->
{% include "components/info.html" %}

{% endblock %}

{% block scripts %}
<script src="https://sdk.scdn.co/spotify-player.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<script src="{% static 'js/proj/stream.js' %}"></script>

<script src="{% static 'js/proj/components/chat.js' %}"></script>
<script src="{% static 'js/proj/components/hosts.js' %}"></script>
<script src="{% static 'js/proj/components/queue.js' %}"></script>
<script src="{% static 'js/proj/components/search.js' %}"></script>
<script src="{% static 'js/proj/components/share.js' %}"></script>
<script src="{% static 'js/proj/components/info.js' %}"></script>

<script src="{% static 'js/proj/components/playback/spotify.js' %}"></script>
<script src="{% static 'js/proj/components/playback/youtube.js' %}"></script>
<script src="{% static 'js/proj/components/playback/storage.js' %}"></script>
{% endblock %}
